{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gift Mabokela\\\\Documents\\\\3rd year\\\\2nd Sem\\\\EPE 321\\\\foodsave-hub\\\\client\\\\src\\\\database\\\\BulkUpload.js\";\n// src/bulkupload/BulkUpload.js\nimport React, { Component } from 'react';\nimport './BulkUpload.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass BulkUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.handleFileChange = e => {\n      const file = e.target.files[0];\n      if (!file) return;\n      if (!file.name.endsWith('.xlsx')) {\n        this.setState({\n          error: 'Invalid file type. Please upload an Excel (.xlsx) file.',\n          success: ''\n        });\n      } else {\n        this.setState({\n          file,\n          error: '',\n          success: ''\n        });\n      }\n    };\n    this.uploadFile = async () => {\n      if (!this.state.file) return this.setState({\n        error: 'Please choose an Excel (.xlsx) file.'\n      });\n      const formData = new FormData();\n      formData.append('file', this.state.file);\n      try {\n        const API_URL = process.env.REACT_APP_API_URL;\n        const res = await fetch(`${API_URL}/api/bulkupload`, {\n          method: 'POST',\n          body: formData\n        });\n        const data = await res.json();\n        if (res.ok) {\n          this.setState({\n            success: `${data.count} items uploaded successfully.`,\n            error: '',\n            preview: []\n          });\n        } else {\n          this.setState({\n            error: data.error || 'Validation failed',\n            success: ''\n          });\n          if (data.details) console.warn(data.details);\n        }\n      } catch (err) {\n        this.setState({\n          error: `Server error: ${err.message}`,\n          success: ''\n        });\n      }\n    };\n    this.state = {\n      file: null,\n      error: '',\n      success: '',\n      preview: []\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bulk-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"bulk-title\",\n        children: \"Bulk Upload Excel (.xlsx)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".xlsx\",\n        onChange: this.handleFileChange,\n        className: \"bulk-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.uploadFile,\n        className: \"bulk-btn\",\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), this.state.error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bulk-error\",\n        children: this.state.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 30\n      }, this), this.state.success && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bulk-success\",\n        children: this.state.success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default BulkUpload;","map":{"version":3,"names":["React","Component","jsxDEV","_jsxDEV","BulkUpload","constructor","props","handleFileChange","e","file","target","files","name","endsWith","setState","error","success","uploadFile","state","formData","FormData","append","API_URL","process","env","REACT_APP_API_URL","res","fetch","method","body","data","json","ok","count","preview","details","console","warn","err","message","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","onClick"],"sources":["C:/Users/Gift Mabokela/Documents/3rd year/2nd Sem/EPE 321/foodsave-hub/client/src/database/BulkUpload.js"],"sourcesContent":["// src/bulkupload/BulkUpload.js\r\nimport React, { Component } from 'react';\r\nimport './BulkUpload.css';\r\n\r\nclass BulkUpload extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      file: null,\r\n      error: '',\r\n      success: '',\r\n      preview: []\r\n    };\r\n  }\r\n\r\n  handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (!file.name.endsWith('.xlsx')) {\r\n      this.setState({ error: 'Invalid file type. Please upload an Excel (.xlsx) file.', success: '' });\r\n    } else {\r\n      this.setState({ file, error: '', success: '' });\r\n    }\r\n  };\r\n\r\n  uploadFile = async () => {\r\n    if (!this.state.file) return this.setState({ error: 'Please choose an Excel (.xlsx) file.' });\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', this.state.file);\r\n\r\n    try {\r\n      const API_URL = process.env.REACT_APP_API_URL;\r\n      \r\n      const res = await fetch(`${API_URL}/api/bulkupload`, {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        this.setState({ success: `${data.count} items uploaded successfully.`, error: '', preview: [] });\r\n      } else {\r\n        this.setState({ error: data.error || 'Validation failed', success: '' });\r\n        if (data.details) console.warn(data.details);\r\n      }\r\n    } catch (err) {\r\n      this.setState({ error: `Server error: ${err.message}`, success: '' });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"bulk-container\">\r\n        <h2 className=\"bulk-title\">Bulk Upload Excel (.xlsx)</h2>\r\n\r\n        <input type=\"file\" accept=\".xlsx\" onChange={this.handleFileChange} className=\"bulk-input\" />\r\n        <button onClick={this.uploadFile} className=\"bulk-btn\">Upload</button>\r\n\r\n        {this.state.error && <div className=\"bulk-error\">{this.state.error}</div>}\r\n        {this.state.success && <div className=\"bulk-success\">{this.state.success}</div>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BulkUpload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}